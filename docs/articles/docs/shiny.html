<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Using hypeR in Shiny Applications • hypeR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../../bootstrap-toc.css">
<script src="../../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><link href="../../extra.css" rel="stylesheet">
<meta property="og:title" content="Using hypeR in Shiny Applications">
<meta property="og:description" content="hypeR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../../index.html">hypeR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.7.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../../index.html">Home</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Docs
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/docs/installation.html">Installation</a>
    </li>
    <li>
      <a href="../../articles/docs/basics.html">Basic Usage</a>
    </li>
    <li>
      <a href="../../articles/docs/visualize.html">Visualize Results</a>
    </li>
    <li>
      <a href="../../articles/docs/data.html">Downloading Genesets</a>
    </li>
    <li>
      <a href="../../articles/docs/hierarchy.html">Hierarchical Genesets</a>
    </li>
    <li>
      <a href="../../articles/docs/multihyp.html">Multiple Signatures</a>
    </li>
    <li>
      <a href="../../articles/docs/reporting.html">Generating Reports</a>
    </li>
    <li>
      <a href="../../articles/docs/shiny.html">Shiny Modules</a>
    </li>
    <li>
      <a href="../../articles/docs/fgsea.html">Fast Gene Set Enrichment Analysis</a>
    </li>
  </ul>
</li>
<li>
  <a href="../../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../../news/index.html">Change Log</a>
</li>
<li>
  <a href="https://github.com/montilab/hypeR">
    <span class="fas fa-github"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="shiny_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Using hypeR in Shiny Applications</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/montilab/hypeR/blob/master/vignettes/docs/shiny.Rmd"><code>vignettes/docs/shiny.Rmd</code></a></small>
      <div class="hidden name"><code>shiny.Rmd</code></div>

    </div>

    
    
<div id="shiny-modules" class="section level1">
<h1 class="hasAnchor">
<a href="#shiny-modules" class="anchor"></a>Shiny Modules</h1>
<p>All <strong>hypeR</strong> methods output objects that are compatible with R Shiny and can be incorporated into a variety of applications (e.g. <code><a href="../../reference/hyp_dots.html">hyp_dots()</a></code> returns a <code>ggplot</code> object). The most difficult challenge in incorporating geneset enrichment tasks in Shiny applications is the geneselect selection / fetching itself. To help with this, <strong>hypeR</strong> includes module functions that abstract away the geneset selection code.</p>
<div id="what-are-shiny-modules" class="section level2">
<h2 class="hasAnchor">
<a href="#what-are-shiny-modules" class="anchor"></a>What Are Shiny Modules?</h2>
<p>Shiny modules are functions that generato Shiny UI / Server code. They are composable elements that can be used within and interface with existing applications. For more information, check out the <a href="https://shiny.rstudio.com/articles/modules.html">latest documentation</a>.</p>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<p>For those familiar with Shiny, you will have accompanying modules for the ui and server sections of your application. These modules are <code><a href="../../reference/genesets_UI.html">hypeR::genesets_UI()</a></code> and <code><a href="../../reference/genesets_Server.html">hypeR::genesets_Server()</a></code> respectively.</p>
<div id="ui" class="section level3">
<h3 class="hasAnchor">
<a href="#ui" class="anchor"></a>UI</h3>
<p>Here we create a simple interface where we use the genesets selection module. Through that module, users can select genesets available through <strong>hypeR</strong> and the application will load those genesets into a <em>reactive variable</em> (more on this later). We add additional code to take a user-defined gene signature and produce an enrichment plot which represents components specific to your Shiny application. This can be anything!</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu">fluidPage</span><span class="op">(</span>
        <span class="fu">sidebarLayout</span><span class="op">(</span>
            <span class="fu">sidebarPanel</span><span class="op">(</span>
                <span class="co"># Put your geneset selector module anywhere</span>
                <span class="fu">hypeR</span><span class="fu">::</span><span class="fu"><a href="../../reference/genesets_UI.html">genesets_UI</a></span><span class="op">(</span><span class="st">"genesets"</span><span class="op">)</span>,
                
                <span class="co"># Add components specific to your application</span>
                <span class="fu">textAreaInput</span><span class="op">(</span><span class="st">"signature"</span>, 
                              label<span class="op">=</span><span class="st">"Signature"</span>, 
                              rows<span class="op">=</span><span class="fl">5</span>,
                              placeholder<span class="op">=</span><span class="st">"GENE1,GENE2,GENE3"</span>, 
                              resize<span class="op">=</span><span class="st">"vertical"</span><span class="op">)</span>,
                
                <span class="fu">actionButton</span><span class="op">(</span><span class="st">"enrichment"</span>, <span class="st">"Enrichment"</span><span class="op">)</span>
            <span class="op">)</span>,
            <span class="fu">mainPanel</span><span class="op">(</span>
                <span class="co"># Enrichment plot</span>
                <span class="fu">plotOutput</span><span class="op">(</span><span class="st">"plot"</span><span class="op">)</span>
            <span class="op">)</span>
        <span class="op">)</span>
    <span class="op">)</span></code></pre></div>
</div>
<div id="server" class="section level3">
<h3 class="hasAnchor">
<a href="#server" class="anchor"></a>Server</h3>
<p>Now we need to create the server code that is responsible for all the backend work. Again, we provide an associated module function for the server code. The serve code returns a <em>reactive variable</em> containing the fetched genesets that were selected. <strong>Selection changes will update this variable and propogate to downstream functions</strong>. Importantly, this variable holding the genesets can be accessed by any part of your application now, enabling you to make applications completely customizable while still utilizing this feature. As an example, our custom function is producing a simple enrichment plot.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span>
    <span class="co"># Retrieve selected genesets as a reactive variable</span>
    <span class="co"># Selection changes will update this variable and propogate to downstream functions</span>
    <span class="va">genesets</span> <span class="op">&lt;-</span> <span class="fu">hypeR</span><span class="fu">::</span><span class="fu"><a href="../../reference/genesets_Server.html">genesets_Server</a></span><span class="op">(</span><span class="st">"genesets"</span><span class="op">)</span>
    
    <span class="co"># Your custom downstream functions</span>
    <span class="va">reactive_plot</span> <span class="op">&lt;-</span> <span class="fu">eventReactive</span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">enrichment</span>, <span class="op">{</span>
        
        <span class="co"># Here are the fetched genesets</span>
        <span class="va">gsets</span> <span class="op">&lt;-</span> <span class="fu">genesets</span><span class="op">(</span><span class="op">)</span>
        
        <span class="co"># Process the signature into a character vector</span>
        <span class="va">signature</span> <span class="op">&lt;-</span> <span class="va">input</span><span class="op">$</span><span class="va">signature</span> <span class="op">%&gt;%</span>
                     <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_split.html">str_split</a></span><span class="op">(</span>pattern<span class="op">=</span><span class="st">","</span>, simplify<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span> <span class="op">%&gt;%</span>
                     <span class="fu"><a href="https://rdrr.io/r/base/vector.html">as.vector</a></span><span class="op">(</span><span class="op">)</span>
        
        <span class="co"># Run hypeR</span>
        <span class="va">hyp</span> <span class="op">&lt;-</span> <span class="fu">hypeR</span><span class="fu">::</span><span class="fu"><a href="../../reference/hypeR.html">hypeR</a></span><span class="op">(</span><span class="va">signature</span>, <span class="va">gsets</span>, test<span class="op">=</span><span class="st">"hypergeometric"</span><span class="op">)</span>
        <span class="va">p</span> <span class="op">&lt;-</span> <span class="fu">hypeR</span><span class="fu">::</span><span class="fu"><a href="../../reference/hyp_dots.html">hyp_dots</a></span><span class="op">(</span><span class="va">hyp</span>, top<span class="op">=</span><span class="fl">10</span>, fdr<span class="op">=</span><span class="fl">0.25</span><span class="op">)</span>
        
        <span class="co"># These are just ggplot objects you could customize</span>
        <span class="va">p</span> <span class="op">+</span> <span class="fu">theme</span><span class="op">(</span>axis.text<span class="op">=</span><span class="fu">element_text</span><span class="op">(</span>size<span class="op">=</span><span class="fl">12</span>, face<span class="op">=</span><span class="st">"bold"</span><span class="op">)</span><span class="op">)</span>
    <span class="op">}</span><span class="op">)</span>
    
    <span class="va">output</span><span class="op">$</span><span class="va">plot</span> <span class="op">&lt;-</span> <span class="fu">renderPlot</span><span class="op">(</span><span class="op">{</span>
        <span class="fu">reactive_plot</span><span class="op">(</span><span class="op">)</span>
    <span class="op">}</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
</div>
</div>
<div id="run" class="section level2">
<h2 class="hasAnchor">
<a href="#run" class="anchor"></a>Run</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">shinyApp</span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://github.com/anfederico">Anthony Federico</a>, <a href="https://github.com/tetomonti">Stefano Monti</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
